ğŸ—ºï¸ ASTRA SYSTEM ARCHITECTURE MAP
=====================================
Complete file structure and component documentation for cross-platform development

HARDWARE PLATFORM: Raspberry Pi 5 16GB + Robot HAT + PiCrawler
IP ADDRESS: 192.168.1.4
HOSTNAME: amy

ğŸ—ï¸ CORE SYSTEM STRUCTURE:
=====================================

ğŸ“ /home/spencer/amy_core/          [MAIN ASTRA DIRECTORY]
â”œâ”€â”€ ğŸ“„ mobile_api_server.py         [Flask API backend - Port 5001]
â”œâ”€â”€ ğŸ“„ astra_web_control.html       [Web interface - Port 8080]
â”œâ”€â”€ ğŸ“„ web_server.py                [Web server daemon]
â”œâ”€â”€ ğŸ“„ start_astra_complete.sh      [System startup script]
â”œâ”€â”€ ğŸ“„ optimized_camera.py          [Camera optimization utilities]
â”œâ”€â”€ ï¿½ *.wav                        [Temp TTS files - auto-cleaned]
â”œâ”€â”€ ğŸ“„ *.log                        [Service logs - api_server.log, camera.log, web_server.log]
â”œâ”€â”€ ï¿½ğŸ“ docs/                        [System documentation]
â”‚   â”œâ”€â”€ ğŸ“„ PROJECT_STATUS_V2.0.txt  [Complete achievement log]
â”‚   â”œâ”€â”€ ğŸ“„ NEXT_STEPS.txt           [Priority tasks]
â”‚   â”œâ”€â”€ ğŸ“„ CONTINUATION_PROMPT.txt  [Session continuity]
â”‚   â”œâ”€â”€ ğŸ“„ SLEEP_MODE_SPEC.txt      [Sleep feature specification]
â”‚   â”œâ”€â”€ ğŸ“„ SYSTEM_MAP.txt           [This file]
â”‚   â””â”€â”€ ğŸ“„ QUICK_REFERENCE.txt      [Operations guide]
â”œâ”€â”€ ğŸ“ keywords/                    [Wake word models]
â”‚   â”œâ”€â”€ ğŸ“„ astra.ppn                [Porcupine wake word model]
â”‚   â””â”€â”€ ğŸ“„ computer.ppn             [Alternative wake word]
â””â”€â”€ ğŸ“ env/                         [Environment configs]
    â””â”€â”€ ğŸ“„ astra_audio.env          [Audio device settings]

ğŸ“ /home/spencer/AmyMobileApp/       [REACT NATIVE MOBILE APP]
â”œâ”€â”€ ğŸ“„ App.js                       [Main mobile interface]
â”œâ”€â”€ ğŸ“„ package.json                 [NPM dependencies]
â””â”€â”€ ğŸ“ node_modules/                [Mobile app dependencies]

ğŸ“ /home/spencer/bin/                [SYSTEM UTILITIES]
â”œâ”€â”€ ğŸ“„ amy_say                      [TTS script with Robot HAT]
â”œâ”€â”€ ğŸ“„ piper                        [TTS binary wrapper]
â”œâ”€â”€ ğŸ“„ amp_on.sh                    [Audio amplifier control]
â””â”€â”€ ğŸ“„ amp_off.sh                   [Audio amplifier control]

ğŸ“ /home/spencer/voices/             [TTS VOICE MODELS]
â”œâ”€â”€ ğŸ“„ en_US-amy-medium.onnx        [Astra voice model]
â””â”€â”€ ğŸ“„ en_US-amy-medium.onnx.json   [Voice model config]

ğŸ“ /home/spencer/picrawler/          [MOTION PLATFORM]
â”œâ”€â”€ ğŸ“„ setup.py                     [PiCrawler installation]
â”œâ”€â”€ ğŸ“ picrawler/                   [Motion control library]
â”œâ”€â”€ ğŸ“ examples/                    [Motion examples]
â””â”€â”€ ğŸ“ my_venv/                     [PiCrawler Python environment]

ğŸ“ /home/spencer/robot-hat/          [HARDWARE ABSTRACTION]
â”œâ”€â”€ ğŸ“„ setup.py                     [Robot HAT installation]
â”œâ”€â”€ ğŸ“ robot_hat/                   [Hardware control library]
â””â”€â”€ ğŸ“ tests/                       [Hardware tests]

ğŸ“ /home/spencer/vilib/              [CAMERA SYSTEM]
â”œâ”€â”€ ğŸ“ vilib/                       [Camera library]
â””â”€â”€ ğŸ“ examples/                    [Camera examples]

ğŸ”§ SYSTEM SERVICES:
=====================================

ğŸ§ SYSTEMD SERVICE:
â”œâ”€â”€ ğŸ“„ /etc/systemd/system/astra.service  [Auto-start service]
â””â”€â”€ Status: sudo systemctl status astra

ğŸŒ NETWORK ENDPOINTS:
â”œâ”€â”€ ğŸ”— Web Control: http://192.168.1.4:8080/astra_web_control.html
â”œâ”€â”€ ğŸ”— API Backend: http://192.168.1.4:5001/api/
â”œâ”€â”€ ğŸ”— Camera Stream: http://192.168.1.4:9000/mjpg
â””â”€â”€ ğŸ”— Mobile App: exp://192.168.1.4:8083

ğŸ¤ AUDIO SYSTEM:
â”œâ”€â”€ ğŸ”Š Device: plughw:sndrpihifiberry (Robot HAT)
â”œâ”€â”€ ğŸ™ï¸ Input: Default USB/HAT microphone
â”œâ”€â”€ ğŸ—£ï¸ TTS: Piper + en_US-amy-medium.onnx
â””â”€â”€ ğŸµ Test: /home/spencer/bin/amy_say "test message"

ğŸ“¹ CAMERA SYSTEM:
â”œâ”€â”€ ğŸ“· Hardware: OV5647 camera module
â”œâ”€â”€ ğŸ“¡ Stream: vilib MJPEG server
â”œâ”€â”€ ğŸŒ URL: http://192.168.1.4:9000/mjpg
â””â”€â”€ ğŸ”§ Control: /api/camera endpoints

ğŸ¤– MOTION SYSTEM:
â”œâ”€â”€ ğŸ¦¾ Platform: PiCrawler 4-leg spider robot
â”œâ”€â”€ ğŸ“š Library: /home/spencer/picrawler/picrawler/
â”œâ”€â”€ ğŸ® Control: Robot HAT GPIO + servo control
â””â”€â”€ ğŸ›¡ï¸ Safety: Desk safe mode (movement disabled)

ğŸ“Š SENSOR SYSTEM:
â”œâ”€â”€ ğŸ“ Distance: HC-SR04 ultrasonic (GPIO D2/D3)
â”œâ”€â”€ ğŸ‘¤ Vision: OpenCV face detection via camera
â”œâ”€â”€ ğŸ”‹ Battery: Robot HAT voltage monitoring
â””â”€â”€ ğŸ“¡ Data: Real-time via /api/sensors

ğŸ’¾ BACKUP LOCATIONS:
â”œâ”€â”€ ğŸ“¦ Local: /home/spencer/monty_backups/
â”œâ”€â”€ ğŸ’» PC Copy: [User maintains separately]
â””â”€â”€ ğŸ“‹ Manifests: /home/spencer/logs/checks/

ğŸ” AUTHENTICATION:
â”œâ”€â”€ ğŸ  Network: Local WiFi 192.168.1.x
â”œâ”€â”€ ğŸšª Access: No authentication (local network only)
â””â”€â”€ ğŸ›¡ï¸ Security: Firewall + local network isolation

âš¡ POWER MANAGEMENT:
â”œâ”€â”€ ğŸ”‹ Battery: Monitored via Robot HAT
â”œâ”€â”€ ğŸ”Œ Charging: External charger (not always connected)
â”œâ”€â”€ ğŸ˜´ Sleep Mode: [PLANNED] Voice/activity disable
â””â”€â”€ ğŸ›¡ï¸ Desk Safe: Movement disabled for desktop testing

ğŸ“ CONFIGURATION FILES:
â”œâ”€â”€ ğŸ”§ Systemd: /etc/systemd/system/astra.service
â”œâ”€â”€ ğŸµ Audio: /home/spencer/amy_core/env/astra_audio.env
â”œâ”€â”€ ğŸ“± Mobile: /home/spencer/AmyMobileApp/package.json
â””â”€â”€ ğŸŒ Web: /home/spencer/amy_core/astra_web_control.html

ğŸš€ STARTUP SEQUENCE:
=====================================
1. Boot â†’ systemd starts astra.service
2. astra.service â†’ runs start_astra_complete.sh
3. API Server starts (port 5001)
4. Camera system starts (port 9000)  
5. Web server starts (port 8080)
6. Mobile app available (port 8083)
7. All services running and accessible

ğŸ› ï¸ DEVELOPMENT TOOLS:
=====================================
â”œâ”€â”€ ğŸ“± Mobile: Expo CLI + React Native
â”œâ”€â”€ ğŸŒ Web: Vanilla HTML/CSS/JavaScript
â”œâ”€â”€ ğŸ”§ Backend: Python Flask + CORS
â”œâ”€â”€ ğŸ¤ Voice: Porcupine + Faster-Whisper + Piper
â”œâ”€â”€ ğŸ“¹ Camera: vilib + OpenCV
â”œâ”€â”€ ğŸ¤– Motion: PiCrawler + Robot HAT
â””â”€â”€ ğŸ”Š Audio: aplay + Robot HAT DAC

This map provides complete system context for development on any platform!